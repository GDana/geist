<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
	PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
	"http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<!-- 
	결재 페이지
	담당 : 김현선
 -->

<mapper namespace="com.geist.approval.mapper.PayMapper">
	<select id="getList" resultType="com.geist.approval.domain.PayVO">
		<![CDATA[
			SELECT
				app_title, app_date, app_status, emp_name
			FROM
				approval
			WHERE
				app_no > 0
		]]>
	</select>
	
	<select id="getListWithPaging" resultType="com.geist.approval.domain.PayVO">
		<![CDATA[
			SELECT
				emp_name, emp_email, emp_phone, emp_tel, emp_position, dept_no
			FROM
			(
				SELECT /*+ INDEX_ASC(employee pk_employee) */
					rownum rn, emp_name, emp_email, emp_phone, emp_tel, emp_position, dept_no
				FROM
					employee
				WHERE
					rownum <= #{pageNum} * #{amount}
			)
			WHERE
				rn > (#{pageNum} - 1) * #{amount}
		]]>
	</select>
</mapper>