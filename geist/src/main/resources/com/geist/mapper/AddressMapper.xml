<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
	PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
	"http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<!-- 
	주소록 조회 페이지
	담당 : 김현선
	
	private String emp_name;		//이름
	private String emp_email;		//이메일
	private String emp_phone;		//개인 연락처
	private String emp_tel;			//사내 연락처
	private String emp_position;	//직책
	private String dept_no;			//부서명
 -->

<mapper namespace="com.geist.mapper.AddressMapper">
	<select id="getList" resultType="com.geist.domain.AddressViewVO">
		<![CDATA[
			SELECT
				emp_name, emp_email, emp_phone, emp_tel, emp_position, dept_no
			FROM
				employee
			WHERE
				emp_no > 0
		]]>
	</select>
	
	<select id="getListWithPaging" resultType="com.geist.domain.AddressViewVO">
		<![CDATA[
			SELECT
				emp_name, emp_email, emp_phone, emp_tel, emp_position, dept_no
			FROM
			(
				SELECT /*+ INDEX_ASC(employee pk_employee) */
					rownum rn, emp_name, emp_email, emp_phone, emp_tel, emp_position, dept_no
				FROM
					employee
				WHERE
					rownum <= #{pageNum} * #{amount}
			)
			WHERE
				rn > (#{pageNum} - 1) * #{amount}
		]]>
	</select>
</mapper>